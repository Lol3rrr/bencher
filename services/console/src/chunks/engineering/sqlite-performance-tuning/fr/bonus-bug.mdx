import BonusBugSql from "../bonus-bug-sql.mdx";
import BonusBugSqlIssue from "../bonus-bug-sql-issue.mdx";
import BonusBugSqlFix from "../bonus-bug-sql-fix.mdx";
import BonusBugRustSchema from "../bonus-bug-rust-schema.mdx";
import BonusBugRustLeftJoin from "../bonus-bug-rust-left-join.mdx";

## Bonus Bug

J'avais initialement un bug dans mon code de [vue mat√©rialis√©e][vue mat√©rialis√©e].
Voici √† quoi ressemblait la requ√™te SQL :

<BonusBugSql />

Avez-vous vu le probl√®me ? Non. Moi non plus !

Le probl√®me est ici :

<BonusBugSqlIssue />

Cela aurait d√ª √™tre :

<BonusBugSqlFix />

J'essayais d'√™tre trop astucieux,
et dans mon sch√©ma de vue mat√©rialis√©e Diesel, j'avais permis cette jointure :

<BonusBugRustSchema />

Je supposais que cette macro √©tait d'une certaine mani√®re assez intelligente
pour relier `alert.boundary_id` √† `metric_boundary.boundary_id`.
Mais h√©las, ce n'√©tait pas le cas.
Il semble qu'elle ait juste choisi la premi√®re colonne de `metric_boundary` (`metric_id`) pour se rapporter √† `alert`.

Une fois que j'ai d√©couvert le bug, il √©tait facile √† corriger.
Il suffisait simplement d'utiliser une jointure explicite dans la requ√™te Perf :

<BonusBugRustLeftJoin />

<br />

> üê∞ C'est tout, folks !

[vue mat√©rialis√©e]: #vue-mat√©rialis√©e